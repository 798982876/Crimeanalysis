select * from (select glib.f_quadtree2geodetic(glib.f_morton_encoding(g_row,g_col,10)) as extend from crimestat.f_get_resnet_data('2012-01-01 00:00:00','2013-01-01 00:00:00',1,'{119.914598,30.760336,121.382326,32.036541}',10)) e;

select glib.f_quadtree2geodetic(glib.f_morton_encoding(extent[1],extent[2],10)) from (select glib.f_morton_decoding(glib.f_geodetic2quadtree(ST_X(geometry(地理位置))::numeric, ST_Y(geometry(地理位置))::numeric, 10)) as extent
 from crimestat.v_incidents) e
 
 测试：
 crimeanalysis=> select ST_X(geometry(地理位置))::numeric, ST_Y(geometry(地理位置))::numeric from crimestat.v_incidents;
    st_x    |   st_y
------------+-----------
 120.654184 | 31.323905
 120.608096 | 31.307488
 120.533278 | 31.250855
 120.576209 | 31.309923
 120.560491 | 31.309496
 120.585952 | 31.202029
 120.674757 | 31.312711
 120.644493 |  31.28788
 120.519927 | 31.380039
 120.597373 | 31.366327
 120.652649 | 31.410234
 120.638616 | 31.296874
 120.604408 | 31.317655
 120.641905 | 31.248203
 120.624508 | 31.392052
 120.506887 | 31.214709
 
 crimeanalysis=> select glib.f_geodetic2quadtree(ST_X(geometry(地理位置))::numeric, ST_Y(geometry(地理位置))::numeric, 10) from crimestat.v_incidents;
 f_geodetic2quadtree
---------------------
 trstrtrqrsr
 trstrtrqrsr
 trstrtrqrsq
 trstrtrqrsq
 trstrtrqrsq
 trstrtrqrsr
 trstrtrqrsr
 trstrtrqrsr
 trstrtrqrrt
 trstrtrqrrs
 trstrtrqrrs
 trstrtrqrsr
 trstrtrqrsr
 trstrtrqrsr
 trstrtrqrrs
 trstrtrqrsq
 trstrtrqrsr
 trstrtrqrsr
 trstrtrqrrs
 trstrtrqrsr
 
 crimeanalysis=> select glib.f_quadtree2geodetic(glib.f_geodetic2quadtree(ST_X(geometry(地理位置))::numeric, ST_Y(geometry(地理位置))::numeric, 10)) from crimestat.v_incidents;
                                                                         f_quadtree2geodetic                            
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.585937499999999917342179528591412109375000,120.23437499999999991758316442792496484375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.585937499999999917342179528591412109375000,120.23437499999999991758316442792496484375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.585937499999999917342179528591412109375000,120.23437499999999991758316442792496484375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.585937499999999917342179528591412109375000,120.23437499999999991758316442792496484375000,31.6533813996640932799277745708531,31.3536369415010783069695515304282}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.6533813996640932799277745708531,31.3536369415010783069695515304282}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.6533813996640932799277745708531,31.3536369415010783069695515304282}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.3536369415010783069695515304282,31.0529339857052594137511150192598}
 {120.937499999999999917101194629257859375000,120.585937499999999917342179528591412109375000,31.3536369415010
 
 问题：
 f_morton 有问题
 
 
